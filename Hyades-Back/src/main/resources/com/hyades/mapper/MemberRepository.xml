<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.hyades.mapper.MemberRepository">
    <!-- 쿼리 작성 -->
    <select id="findAll" resultMap="memberResultMap">
        SELECT * FROM member;
    </select>
    
    <select id="findById" parameterType="java.lang.Long" resultMap="memberResultMap">
        SELECT * FROM member where member_id=#{id};
    </select>

    <select id="findByEmail" parameterType="java.lang.String" resultMap="memberResultMap">
        SELECT * from member where email=#{email};
    </select>
    
    <insert id="save" parameterType="com.hyades.domain.entity.Member">
        insert into member (email, nickname, profile_img)
            values (#{email}, #{nickname}, #{profileImg});
        <selectKey keyProperty="memberId" resultType="java.lang.Long">
            SELECT LAST_INSERT_ID();
        </selectKey>
    </insert>
    
    <resultMap id="memberResultMap" type="com.hyades.domain.entity.Member">
        <id column="member_id" property="memberId"/>
        <result column="email" property="email"/>
        <result column="nickname" property="nickname"/>
        <result column="profile_img" property="profileImg"/>
    </resultMap>
</mapper>